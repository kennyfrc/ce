{
  "schemaVersion": 1,
  "metadata": {
    "currentBranch": "ts2",
    "updatedAt": "2025-08-29T12:46:57Z"
  },
  "tasks": [
    {
      "id": "ts-zero-20250829-0001",
      "name": "Fix test/merges.ts syntax and configuration issues",
      "description": "Resolve global root variable conflicts and type issues in test/merges.ts",
      "phase": 6,
      "state": "completed",
      "candidateFiles": [
        "test/merges.ts",
        "test/global.d.ts",
        "tsconfig.test.json"
      ],
      "fileHints": [
        {
          "path": "test/merges.ts",
          "lineStart": 1,
          "lineEnd": 10
        }
      ],
      "owners": [
        "@team/types"
      ],
      "labels": [
        "test",
        "types",
        "configuration"
      ],
      "acceptanceCriteria": [
        "No TypeScript syntax errors in test/merges.ts",
        "Global root variable properly accessible",
        "jspreadsheet calls properly typed"
      ],
      "links": [],
      "createdAt": "2025-08-29T22:00:00Z",
      "updatedAt": "2025-08-29T22:00:00Z"
    },
    {
      "id": "ts-zero-20250829-0002",
      "name": "Add optional chaining to test file method calls",
      "description": "Fix TS2722 errors by adding optional chaining to SpreadsheetContext method calls in test files",
      "phase": 6,
      "state": "completed",
      "candidateFiles": [
        "test/paste.ts",
        "test/rows.ts",
        "test/headers.ts",
        "test/columns.ts",
        "test/meta.ts",
        "test/redo.ts"
      ],
      "fileHints": [],
      "owners": [
        "@team/types"
      ],
      "labels": [
        "test",
        "types",
        "optional-chaining"
      ],
      "acceptanceCriteria": [
        "All TS2722 'possibly undefined' errors resolved",
        "Test files use proper optional chaining for SpreadsheetContext methods"
      ],
      "links": [],
      "createdAt": "2025-08-29T22:00:00Z",
      "updatedAt": "2025-08-29T22:00:00Z"
    },
    {
      "id": "ts-zero-20250829-0003",
      "name": "Fix type mismatches in test files",
      "description": "Resolve TS2345 argument type mismatches and TS18047 null checks in test files",
      "phase": 6,
      "state": "completed",
      "candidateFiles": [
        "test/rows.ts",
        "src/types/core.ts"
      ],
      "fileHints": [],
      "owners": [
        "@team/types"
      ],
      "labels": [
        "test",
        "types",
        "type-mismatches"
      ],
      "acceptanceCriteria": [
        "All TS2345 and TS18047 errors resolved",
        "Method signatures match runtime usage"
      ],
      "links": [],
      "createdAt": "2025-08-29T22:00:00Z",
      "updatedAt": "2025-08-29T22:00:00Z"
    },
    {
      "id": "ts-zero-20250829-0004",
      "name": "Validate zero TypeScript errors achievement",
      "description": "Run final verification that all TypeScript errors are resolved with strict settings",
      "phase": 6,
      "state": "completed",
      "candidateFiles": [
        "tsconfig.test.json",
        "tsconfig.json"
      ],
      "fileHints": [],
      "owners": [
        "@team/types"
      ],
      "labels": [
        "validation",
        "zero-errors"
      ],
      "acceptanceCriteria": [
        "npx tsc -p tsconfig.test.json --noEmit returns exit code 0",
        "No TypeScript errors in src/ or test/ directories",
        "CI gates pass with zero any types maintained"
      ],
      "links": [],
      "createdAt": "2025-08-29T22:00:00Z",
      "updatedAt": "2025-08-29T22:00:00Z"
    },
    {
      "id": "ts-zero-20250829-0005",
      "name": "Program completion: Zero TypeScript errors achieved",
      "description": "Successfully reached zero TypeScript errors with strict settings and maintained zero explicit any types",
      "phase": 6,
      "state": "completed",
      "candidateFiles": [
        "tsconfig.test.json",
        "test/merges.ts",
        "test/calculations.ts"
      ],
      "fileHints": [],
      "owners": [
        "@team/types"
      ],
      "labels": [
        "completion",
        "zero-errors",
        "success"
      ],
      "acceptanceCriteria": [
        "npx tsc -p tsconfig.test.json --noEmit returns exit code 0",
        "Zero explicit any types in codebase",
        "All test file global variable issues resolved"
      ],
      "links": [],
      "createdAt": "2025-08-29T23:30:00Z",
      "updatedAt": "2025-08-29T23:30:00Z"
    },
    {
      "id": "verify-20250829-0006",
      "name": "Fix webpack build TypeScript errors (src/test.ts globals)",
      "description": "Resolve TS2339 errors in src/test.ts during production build by excluding src/test.ts from webpack TS program or adding proper Window global declarations.",
      "phase": 7,
      "state": "completed",
      "candidateFiles": [
        "src/test.ts",
        "tsconfig.webpack.json"
      ],
      "owners": [
        "@team/types",
        "@team/build"
      ],
      "labels": [
        "build",
        "typescript",
        "config"
      ],
      "acceptanceCriteria": [
        "npm run build exits with code 0",
        "No TS errors from src/test.ts during build"
      ]
    },
    {
      "id": "verify-20250829-0007",
      "name": "Correct tsconfig.json include/rootDir mismatch",
      "description": "Remove Playwright includes from tsconfig.json or adjust rootDir to avoid TS6059 when running tsc -p tsconfig.json.",
      "phase": 7,
      "state": "completed",
      "candidateFiles": [
        "tsconfig.json"
      ],
      "owners": [
        "@team/types"
      ],
      "labels": [
        "typescript",
        "config"
      ],
      "acceptanceCriteria": [
        "tsc -p tsconfig.json --noEmit exits 0",
        "No TS6059 errors about files outside rootDir"
      ]
    },
    {
      "id": "verify-20250829-0008",
      "name": "Fix Mocha test script to discover .ts tests",
      "description": "Update npm test script to include --extension ts and remove unnecessary build step, or ensure build passes before running tests.",
      "phase": 7,
      "state": "completed",
      "candidateFiles": [
        "package.json"
      ],
      "owners": [
        "@team/tests"
      ],
      "labels": [
        "mocha",
        "scripts"
      ],
      "acceptanceCriteria": [
        "npm test discovers and runs TypeScript tests",
        "Mocha exits 0 locally"
      ]
    },
    {
      "id": "verify-20250829-0009",
      "name": "Update Playwright tests to new DOM/CSS classes",
      "description": "Replace outdated .jexcel selectors and brittle assertions; align with new jss_* class names and computed totals.",
      "phase": 7,
      "state": "completed",
      "candidateFiles": [
        "playwright/*.test.ts"
      ],
      "owners": [
        "@team/e2e"
      ],
      "labels": [
        "playwright",
        "e2e",
        "selectors"
      ],
      "acceptanceCriteria": [
        "npx playwright test passes all specs locally",
        "No flaky waits; use robust selectors"
      ]
    },
    {
      "id": "verify-20250829-0010",
      "name": "demo.html verification and hardening",
      "description": "Ensure demo.html works standalone: depends on dist/ assets, loads without errors, and basic interactions function; document steps in README.",
      "phase": 7,
      "state": "completed",
      "candidateFiles": [
        "demo.html",
        "README.md"
      ],
      "owners": [
        "@team/docs",
        "@team/e2e"
      ],
      "labels": [
        "demo",
        "docs"
      ],
      "acceptanceCriteria": [
        "demo.html loads with http-server on port 8080",
        "Window.jspreadsheet available; basic init works"
      ]
    },
    {
      "id": "cleanup-20250829-0011",
      "name": "Remove backup/tmp/original files from repo",
      "description": "Delete legacy backup/tmp/original artifacts left from migration: src/utils/*.{backup,backup2,orig,original,tmp}, test/rows.ts.backup, columns_backup.ts, plan_backup.json.",
      "phase": 7,
      "state": "completed",
      "candidateFiles": [
        "src/utils/data.backup",
        "src/utils/data.backup2",
        "src/utils/data.ts.backup",
        "src/utils/data.ts.backup2",
        "src/utils/editor.ts.backup",
        "src/utils/editor.ts.orig",
        "src/utils/events.ts.backup",
        "src/utils/events.ts.backup.test",
        "src/utils/events.ts.original",
        "src/utils/events.ts.tmp",
        "src/utils/keys.ts.backup",
        "src/utils/keys.ts.original",
        "test/rows.ts.backup",
        "columns_backup.ts",
        "plan_backup.json"
      ],
      "owners": [
        "@team/cleanup"
      ],
      "labels": [
        "cleanup",
        "repo-hygiene"
      ],
      "acceptanceCriteria": [
        "fd --regex '(\\.backup|\\.backup2|\\.orig|\\.original|\\.tmp)$' returns no results outside node_modules/dist",
        "git history retains originals; working tree clean"
      ]
    },
    {
      "id": "cleanup-20250829-0012",
      "name": "Consolidate or remove stray top-level test files",
      "description": "Move root-level test files into test/ or playwright/ or drop if obsolete: test.ts, test_parseValue.ts, test_events_snippet.ts, test-header.ts; ensure configs include their new locations if kept.",
      "phase": 7,
      "state": "todo",
      "candidateFiles": [
        "test.ts",
        "test_parseValue.ts",
        "test_events_snippet.ts",
        "test-header.ts"
      ],
      "owners": [
        "@team/test"
      ],
      "labels": [
        "cleanup",
        "tests"
      ],
      "acceptanceCriteria": [
        "No *.ts test files at repo root",
        "Unit/E2E configs updated if files are retained"
      ]
    },
    {
      "id": "scripts-20250829-0013",
      "name": "Harden npm scripts for unit and e2e",
      "description": "Add test:unit (mocha with --extension ts) and e2e (playwright test) scripts; adjust test script to avoid hard dependency on production build or ensure build passes first.",
      "phase": 7,
      "state": "todo",
      "candidateFiles": [
        "package.json"
      ],
      "owners": [
        "@team/test"
      ],
      "labels": [
        "scripts",
        "mocha",
        "playwright"
      ],
      "acceptanceCriteria": [
        "npm run test:unit executes TS tests",
        "npm run e2e runs Playwright suite",
        "npm test strategy agreed (build-first vs direct)"
      ]
    }
  ]
}
